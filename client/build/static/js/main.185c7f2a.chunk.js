(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{118:function(e,t,n){},140:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(80),s=n.n(a),i=(n(95),n(49)),o=n(10),l=n(18),u=n.n(l),j=n(32),b=n(29),d=n(42),O=n(7),h=(n(97),n(98),n(30)),p=n(195),x=n(196),f=n(197),m=n(88),v=n(194),g=(n(118),n(82)),w=n.n(g).a.create({baseURL:"https://traveldev.herokuapp.com/api/"}),S=n(2);function N(e){var t=e.setShowRegister,n=Object(c.useState)(!1),r=Object(O.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(!1),o=Object(O.a)(i,2),l=o[0],j=o[1],d=Object(c.useRef)(),h=Object(c.useRef)(),p=Object(c.useRef)(),x=function(){var e=Object(b.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:d.current.value,email:h.current.value,password:p.current.value},e.prev=2,e.next=5,w.post("/users/register",n);case 5:j(!1),s(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),j(!0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"registerContainer",children:[Object(S.jsx)("div",{className:"title",children:Object(S.jsx)("span",{children:"Register"})}),Object(S.jsxs)("form",{onSubmit:x,children:[Object(S.jsx)("input",{autoFocus:!0,placeholder:"username",ref:d,required:!0}),Object(S.jsx)("input",{type:"email",placeholder:"email",ref:h,required:!0}),Object(S.jsx)("input",{type:"password",min:"6",placeholder:"password",ref:p,required:!0}),Object(S.jsx)("button",{className:"btn",type:"submit",children:"Register"}),a&&Object(S.jsx)("span",{className:"successMsg",children:"Successfull. You can login now!"}),l&&Object(S.jsxs)("span",{className:"failureMsg",children:["Username is Already in Use.",Object(S.jsx)("br",{}),"Something went wrong!"]})]}),Object(S.jsx)(v.a,{className:"cancelBtn",onClick:function(){return t(!1)}})]})}n(140);function k(e){var t=e.setShowLogin,n=e.setCurrentUsername,r=e.myStorage,a=Object(c.useState)(!1),s=Object(O.a)(a,2),i=s[0],o=s[1],l=Object(c.useRef)(),j=Object(c.useRef)(),d=function(){var e=Object(b.a)(u.a.mark((function e(c){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),a={username:l.current.value,password:j.current.value},e.prev=2,e.next=5,w.post("/users/login",a);case 5:s=e.sent,n(s.data.username),r.setItem("user",s.data.username),t(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),o(!0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"loginContainer",children:[Object(S.jsx)("div",{className:"title",children:Object(S.jsx)("span",{children:"Log In"})}),Object(S.jsxs)("form",{onSubmit:d,children:[Object(S.jsx)("input",{autoFocus:!0,placeholder:"username",ref:l,required:!0}),Object(S.jsx)("input",{type:"password",min:"6",placeholder:"password",ref:j,required:!0}),Object(S.jsx)("button",{className:"loginBtn",type:"submit",children:"Login"}),i&&Object(S.jsx)("span",{className:"failure",children:"Wrong username or password"})]}),Object(S.jsx)(v.a,{className:"loginCancel",onClick:function(){return t(!1)}})]})}n(141),n(142);var y=n(89);var C=function(){var e=window.localStorage,t=Object(c.useState)(e.getItem("user")),n=Object(O.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)([]),i=Object(O.a)(s,2),o=i[0],l=i[1],v=Object(c.useState)(null),g=Object(O.a)(v,2),C=g[0],R=g[1],L=Object(c.useState)(null),I=Object(O.a)(L,2),M=I[0],F=I[1],z=Object(c.useState)(null),T=Object(O.a)(z,2),q=T[0],A=T[1],B=Object(c.useState)(null),D=Object(O.a)(B,2),E=D[0],U=D[1],J=Object(c.useState)(0),_=Object(O.a)(J,2),P=_[0],X=_[1],G=Object(c.useState)({latitude:55.040182,longitude:17.071727,zoom:4}),V=Object(O.a)(G,2),W=V[0],Y=V[1],H=Object(c.useState)(!1),Z=Object(O.a)(H,2),K=Z[0],Q=Z[1],$=Object(c.useState)(!1),ee=Object(O.a)($,2),te=ee[0],ne=ee[1],ce=Object(c.useRef)(),re=Object(c.useRef)(),ae=Object(c.useCallback)((function(e){return Y(e)}),[]),se=function(){var e=Object(b.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:r,title:q,desc:E,rating:P,lat:M.lat,long:M.long},e.prev=2,e.next=5,w.post("/pins",n);case 5:c=e.sent,l([].concat(Object(j.a)(o),[c.data])),F(null),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get("/pins");case 3:t=e.sent,l(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var ie=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.delete("/pins/".concat(t)).then((function(){l(o.filter((function(e){return e._id!=t})))}));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{style:{height:"100vh",width:"100%"},children:[Object(S.jsxs)(h.d,Object(d.a)(Object(d.a)({},W),{},{mapboxApiAccessToken:"pk.eyJ1Ijoiam9obmF0aGFuMSIsImEiOiJja3Rib3lhMTgxcmp3Mm5wY2dxMW9vZzBzIn0.3MylMXFiUxmNLh8q1Xtv0w",width:"100%",height:"100%",transitionDuration:"200",mapStyle:"mapbox://styles/johnathan1/ckth03be44rgi17p7hx8yhkj1",attributionControl:!1,onViewportChange:function(e){return Y(e)},onDblClick:r&&function(e){var t=Object(O.a)(e.lngLat,2),n=t[0],c=t[1];F({lat:c,long:n})},onClick:function(){return Q(!1),void ne(!1)},ref:ce,children:[Object(S.jsx)(y.a,{mapboxApiAccessToken:"pk.eyJ1Ijoiam9obmF0aGFuMSIsImEiOiJja3Rib3lhMTgxcmp3Mm5wY2dxMW9vZzBzIn0.3MylMXFiUxmNLh8q1Xtv0w",onSelected:function(e,t){Y(e)},hideOnSelect:!0,mapRef:ce,position:"top-left",containerRef:re,onViewportChange:ae}),o.map((function(e){return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(h.b,{latitude:e.lat,longitude:e.long,offsetLeft:-3.5*W.zoom,offsetTop:-7*W.zoom,children:Object(S.jsx)(p.a,{style:{fontSize:7*W.zoom,color:r===e.username?"red":"#168080",cursor:"pointer"},onClick:function(){return t=e._id,n=e.lat,c=e.long,R(t),void Y(Object(d.a)(Object(d.a)({},W),{},{latitude:n,longitude:c}));var t,n,c}})}),e._id===C&&Object(S.jsx)(h.c,{latitude:e.lat,longitude:e.long,closeButton:!0,closeOnClick:!0,onClose:function(){return R(null)},anchor:"left",children:Object(S.jsxs)("div",{className:"card",children:[Object(S.jsx)("label",{children:"Place"}),Object(S.jsx)("h4",{className:"place",children:e.title}),Object(S.jsx)("label",{children:"Review"}),Object(S.jsx)("p",{className:"desc",children:e.desc}),Object(S.jsx)("label",{children:"Rating"}),Object(S.jsx)("div",{className:"circles",children:Array(e.rating).fill(Object(S.jsx)(x.a,{className:"circle"}))}),Object(S.jsx)("label",{children:"Information"}),Object(S.jsxs)("span",{className:"username",children:["Created by ",Object(S.jsx)("b",{children:e.username})]}),Object(S.jsx)("span",{className:"date",children:Object(m.a)(e.createdAt)}),e.username===r&&Object(S.jsx)("p",{className:"delete",children:Object(S.jsx)(f.a,{style:{color:"#306d50"},onClick:function(){return ie(e._id)}})})]})},e._id)]})})),M&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(h.b,{latitude:M.lat,longitude:M.long,offsetLeft:-3.5*W.zoom,offsetTop:-7*W.zoom,children:Object(S.jsx)(p.a,{style:{fontSize:7*W.zoom,color:"tomato",cursor:"pointer"}})}),Object(S.jsx)(h.c,{latitude:M.lat,longitude:M.long,closeButton:!0,closeOnClick:!1,onClose:function(){return F(null)},anchor:"left",children:Object(S.jsx)("div",{className:"description",children:Object(S.jsxs)("form",{onSubmit:se,children:[Object(S.jsx)("label",{children:"Title"}),Object(S.jsx)("input",{placeholder:"Enter a title",autoFocus:!0,onChange:function(e){return A(e.target.value)},required:!0}),Object(S.jsx)("label",{children:"Description"}),Object(S.jsx)("textarea",{placeholder:"Say us something about this place.",onChange:function(e){return U(e.target.value)},required:!0}),Object(S.jsx)("label",{children:"Rating"}),Object(S.jsxs)("select",{onChange:function(e){return X(e.target.value)},required:!0,children:[Object(S.jsx)("option",{value:"",selected:"selected",hidden:"hidden",children:"Choose"}),Object(S.jsx)("option",{value:"1",children:"1"}),Object(S.jsx)("option",{value:"2",children:"2"}),Object(S.jsx)("option",{value:"3",children:"3"}),Object(S.jsx)("option",{value:"4",children:"4"}),Object(S.jsx)("option",{value:"5",children:"5"})]}),Object(S.jsx)("button",{type:"submit",className:"submitButton",children:"Add Review"})]})})})]})]})),r?Object(S.jsx)("button",{className:"button logout",onClick:function(){a(null),e.removeItem("user")},children:"Log out"}):Object(S.jsxs)("div",{className:"buttons",children:[Object(S.jsx)("button",{className:"button login",onClick:function(){return ne(!0),void Q(!1)},children:"Log in"}),Object(S.jsx)("button",{className:"button register",onClick:function(){return ne(!1),void Q(!0)},children:"Register"})]}),K&&Object(S.jsx)(N,{setShowRegister:Q}),te&&Object(S.jsx)(k,{setShowLogin:ne,setCurrentUsername:a,myStorage:e})]})};n(173);var R=function(){return Object(S.jsx)("footer",{children:Object(S.jsx)("div",{className:"copyright",children:Object(S.jsx)("p",{children:"\xa9 Travel advisor | ALL RIGHTS RESERVED 2021"})})})},L=(n(174),n(85)),I=n(87);var M=function(){var e=Object(o.f)();return Object(S.jsx)("div",{children:Object(S.jsxs)("div",{className:"errorContainer",children:[Object(S.jsxs)("div",{className:"error",children:[Object(S.jsx)("p",{children:"4"}),Object(S.jsx)(L.a,{icon:I.a,className:"fa-spin"}),Object(S.jsx)("p",{children:"4"})]}),Object(S.jsxs)("div",{className:"errorMessage",children:[Object(S.jsxs)("p",{children:['OOPS, The page "',e.pathname,"\" you are looking for can't be found!"]}),Object(S.jsxs)("p",{children:["Let's go ",Object(S.jsx)(i.b,{to:"/",children:"Home"})," and try from there."]})]})]})})};n(180);var F=function(){return Object(S.jsx)("div",{className:"App",children:Object(S.jsxs)(i.a,{children:[Object(S.jsxs)(o.c,{children:[Object(S.jsx)(o.a,{path:"/",exact:!0,component:C}),Object(S.jsx)(o.a,{component:M})]}),Object(S.jsx)(R,{})]})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,198)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(F,{})}),document.getElementById("root")),z()},95:function(e,t,n){},97:function(e,t,n){}},[[181,1,2]]]);
//# sourceMappingURL=main.185c7f2a.chunk.js.map